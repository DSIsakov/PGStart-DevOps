---

- name: Configuring PostgreSQL 1/2
  ansible.builtin.lineinfile:
    path: "{{ debian_psql_conf_path }}"
    regexp: "(#|^)listen_addresses"
    line: "listen_addresses = '*'"
    owner: postgres
    group: postgres

- name: Configuring PostgreSQL 2/2
  ansible.builtin.template:
    src: pg_hba.conf.j2
    dest: "{{ debian_psql_hba_conf_path }}"
    owner: postgres
    group: postgres
  notify: restart postgres
